# ğŸ¯ Jaaz PSDåˆ†å±‚ç¼©æ”¾ - å¿«é€Ÿå‚è€ƒ

## ç«¯å£é…ç½®

| æœåŠ¡ | ç«¯å£ | åœ°å€ |
|------|------|------|
| å‰ç«¯ | **3100** | http://localhost:3100 |
| åç«¯ | **58000** | http://localhost:58000 |

## ç«‹å³ä½¿ç”¨

### 1ï¸âƒ£ åˆ·æ–°æµè§ˆå™¨
```
Ctrl + Shift + R (Windows/Linux)
Cmd + Shift + R (Mac)
```

### 2ï¸âƒ£ è®¿é—®
```
http://localhost:3100/canvas/default
```

### 3ï¸âƒ£ æ“ä½œ
1. ä¸Šä¼ PSDæ–‡ä»¶
2. ç‚¹å‡»"æ™ºèƒ½ç¼©æ”¾"ï¼ˆAIå›¾æ ‡ï¼‰
3. é€‰æ‹©"ç¼©æ”¾å•ä¸ªPSDæ–‡ä»¶"
4. å¯ç”¨"åˆ†å±‚æ¨¡å¼ âœ¨"
5. è®¾ç½®ç›®æ ‡å°ºå¯¸
6. å¼€å§‹ç¼©æ”¾

## æœåŠ¡ç®¡ç†

### æ£€æŸ¥çŠ¶æ€
```bash
cd /home/ubuntu/jaaz
./check_services.sh
```

### é‡å¯å‰ç«¯
```bash
cd /home/ubuntu/jaaz
./restart_frontend.sh
```

### é‡å¯åç«¯
```bash
cd /home/ubuntu/jaaz
./restart_backend.sh
```

## æ ¸å¿ƒAPI

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/psd/resize/resize-by-id` | POST | PSDåˆæˆç¼©æ”¾ |
| `/api/psd/resize/resize-by-id-layered` | POST | PSDåˆ†å±‚ç¼©æ”¾ |
| `/api/psd/resize/layered/{id}/layer_{idx}` | GET | è·å–å•å±‚PNG |
| `/api/canvas/resize` | POST | ç”»å¸ƒåˆæˆç¼©æ”¾ |
| `/api/canvas/resize-layered` | POST | ç”»å¸ƒåˆ†å±‚ç¼©æ”¾ |

## æ•…éšœæ’æŸ¥

### UIçœ‹ä¸åˆ°æ–°é€‰é¡¹
```bash
# å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨
Ctrl + Shift + R

# æˆ–é‡å¯å‰ç«¯
./restart_frontend.sh
```

### APIè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./check_services.sh

# æµ‹è¯•åç«¯
curl http://127.0.0.1:58000/api/config
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å‰ç«¯æ—¥å¿—
tail -f /tmp/jaaz_frontend.log

# åç«¯æ—¥å¿—
tail -f /home/ubuntu/jaaz/server/backend.log
```

## æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| å‰ç«¯UIç»„ä»¶ | `react/src/components/canvas/PSDResizeDialog.tsx` |
| å·¥å…·èœå• | `react/src/components/canvas/menu/CanvasToolMenu.tsx` |
| åç«¯PSDè·¯ç”± | `server/routers/psd_resize_router.py` |
| åç«¯ç”»å¸ƒè·¯ç”± | `server/routers/canvas_resize_router.py` |
| GeminiæœåŠ¡ | `server/services/gemini_psd_resize_service.py` |

## åˆ†å±‚è¾“å‡º

### å­˜å‚¨è·¯å¾„
```
user_data/files/psd/psd_layered_{timestamp}/
â”œâ”€â”€ metadata.json
â”œâ”€â”€ layer_000_xxx.png
â”œâ”€â”€ layer_001_xxx.png
â””â”€â”€ ...
```

### metadata.jsonæ ¼å¼
```json
{
  "file_id": "psd_layered_xxxxx",
  "target_size": {"width": 800, "height": 600},
  "layers": [
    {
      "index": 0,
      "name": "å›¾å±‚åç§°",
      "left": 0, "top": 0,
      "width": 800, "height": 600,
      "opacity": 100,
      "image_url": "/api/psd/resize/layered/.../layer_000"
    }
  ]
}
```

## æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | åˆæˆæ¨¡å¼ | åˆ†å±‚æ¨¡å¼ |
|------|----------|----------|
| è¾“å‡º | 1å¼ PNG | Nä¸ªPNG + JSON |
| ç”»å¸ƒå…ƒç´  | 1ä¸ª | Nä¸ª |
| å¯ç¼–è¾‘æ€§ | æ•´ä½“ç§»åŠ¨ | æ¯å±‚ç‹¬ç«‹ |
| æ–‡ä»¶å¤§å° | å° | è¾ƒå¤§ |
| é€‚ç”¨åœºæ™¯ | æœ€ç»ˆå±•ç¤º | ç»§ç»­ç¼–è¾‘ |

---

**æœ€åæ›´æ–°**: 2024å¹´10æœˆ29æ—¥  
**ç‰ˆæœ¬**: v1.0  
**ç«¯å£**: å‰ç«¯3100, åç«¯58000




