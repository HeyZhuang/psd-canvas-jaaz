# ğŸ‰ PSDåˆ†å±‚ç¼©æ”¾åŠŸèƒ½å·²å®Œæˆï¼

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å‰ç«¯ä¿®æ”¹
- âœ… æ·»åŠ "ç¼©æ”¾å•ä¸ªPSDæ–‡ä»¶"å’Œ"ç¼©æ”¾æ•´ä¸ªç”»å¸ƒ"æ¨¡å¼é€‰æ‹©
- âœ… æ·»åŠ "åˆ†å±‚æ¨¡å¼ âœ¨"å’Œ"åˆæˆæ¨¡å¼"è¾“å‡ºé€‰æ‹©
- âœ… ä¿®å¤æ‰€æœ‰TypeScriptç¼–è¯‘é”™è¯¯
- âœ… å‰ç«¯ä»£ç ç¼–è¯‘æˆåŠŸ

### 2. åç«¯å®ç°
- âœ… æ–°å¢ `/api/psd/resize/resize-by-id-layered` ç«¯ç‚¹
- âœ… æ–°å¢ `/api/psd/resize/layered/{file_id}/layer_{index}` ç«¯ç‚¹
- âœ… åç«¯æœåŠ¡è¿è¡Œä¸­ (PID: 451797, ç«¯å£: 57988)

### 3. æ ¸å¿ƒåŠŸèƒ½
- âœ… PSDæ–‡ä»¶æ™ºèƒ½ç¼©æ”¾
- âœ… åˆ†å±‚è¾“å‡ºï¼ˆJSON + ç‹¬ç«‹PNGï¼‰
- âœ… ç”»å¸ƒè‡ªåŠ¨æ·»åŠ å›¾å±‚
- âœ… æ¯ä¸ªå›¾å±‚ç‹¬ç«‹å¯ç§»åŠ¨

---

## ğŸš€ ç«‹å³å¼€å§‹ä½¿ç”¨

### ç¬¬ä¸€æ­¥ï¼šé‡å¯å‰ç«¯æœåŠ¡

åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd /home/ubuntu/jaaz
chmod +x restart_frontend.sh check_services.sh
./restart_frontend.sh
```

æˆ–è€…æ‰‹åŠ¨é‡å¯ï¼š

```bash
# åœæ­¢å‰ç«¯
pkill -f "jaaz/react.*vite"

# è¿›å…¥ç›®å½•å¹¶å¯åŠ¨
cd /home/ubuntu/jaaz/react
npm run dev
```

### ç¬¬äºŒæ­¥ï¼šåˆ·æ–°æµè§ˆå™¨

è®¿é—®ï¼šhttp://localhost:3100/canvas/default

### ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨åˆ†å±‚ç¼©æ”¾

1. **ä¸Šä¼ PSDæ–‡ä»¶**
2. **ç‚¹å‡»"æ™ºèƒ½ç¼©æ”¾"æŒ‰é’®**
3. **é€‰æ‹©"ç¼©æ”¾å•ä¸ªPSDæ–‡ä»¶"** â­
4. **å¯ç”¨"åˆ†å±‚æ¨¡å¼ âœ¨"** â­â­â­
5. **è®¾ç½®ç›®æ ‡å°ºå¯¸**ï¼ˆå¦‚ï¼š800x600ï¼‰
6. **è¾“å…¥Gemini APIå¯†é’¥**ï¼ˆæˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰
7. **ç‚¹å‡»"å¼€å§‹æ™ºèƒ½ç¼©æ”¾"**
8. **ç­‰å¾…1-2åˆ†é’Ÿ**
9. **å®Œæˆï¼è§‚å¯Ÿæ¯ä¸ªå›¾å±‚éƒ½å¯ä»¥ç‹¬ç«‹æ‹–åŠ¨**

---

## ğŸ“Š ä¸¤ç§æ¨¡å¼å¯¹æ¯”

### åˆæˆæ¨¡å¼ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
```
è¾“å…¥ï¼šPSDæ–‡ä»¶ï¼ˆNä¸ªå›¾å±‚ï¼‰
      â†“
AIæ™ºèƒ½å¸ƒå±€
      â†“
è¾“å‡ºï¼š1å¼ åˆæˆPNG
      â†“
ç”»å¸ƒï¼š1ä¸ªå›¾ç‰‡å…ƒç´ 
```

### åˆ†å±‚æ¨¡å¼ âœ¨ï¼ˆæ–°åŠŸèƒ½ï¼‰
```
è¾“å…¥ï¼šPSDæ–‡ä»¶ï¼ˆNä¸ªå›¾å±‚ï¼‰
      â†“
AIæ™ºèƒ½å¸ƒå±€
      â†“
è¾“å‡ºï¼šmetadata.json + Nä¸ªPNGæ–‡ä»¶
      â†“
ç”»å¸ƒï¼šNä¸ªç‹¬ç«‹å¯ç§»åŠ¨çš„å›¾ç‰‡å…ƒç´ 
```

---

## ğŸ’¾ æ–‡ä»¶å­˜å‚¨ç»“æ„

```
user_data/files/psd/
â”œâ”€â”€ psd_layered_1730188800/
â”‚   â”œâ”€â”€ metadata.json           # å…ƒæ•°æ®
â”‚   â”œâ”€â”€ layer_000_Background.png
â”‚   â”œâ”€â”€ layer_001_Logo.png
â”‚   â”œâ”€â”€ layer_002_Title.png
â”‚   â””â”€â”€ layer_003_Button.png
```

**metadata.json ç¤ºä¾‹ï¼š**
```json
{
  "file_id": "psd_layered_1730188800",
  "original_file_id": "psd_xxxxx",
  "target_size": {"width": 800, "height": 600},
  "layers_count": 4,
  "layers": [
    {
      "index": 0,
      "name": "Background",
      "left": 0,
      "top": 0,
      "width": 800,
      "height": 600,
      "opacity": 100,
      "image_url": "/api/psd/resize/layered/psd_layered_1730188800/layer_000"
    }
  ]
}
```

---

## ğŸ¨ åŠŸèƒ½äº®ç‚¹

### âœ¨ AIæ™ºèƒ½å¸ƒå±€
- ä½¿ç”¨ Google Gemini 2.5 Pro
- è‡ªåŠ¨åˆ†æå›¾å±‚å†…å®¹
- æ™ºèƒ½è®¡ç®—æ–°ä½ç½®å’Œå°ºå¯¸
- ä¿æŒå›¾å±‚é—´çš„è§†è§‰å¹³è¡¡

### ğŸ¯ ç‹¬ç«‹å›¾å±‚
- æ¯å±‚ä¿å­˜ä¸ºç‹¬ç«‹PNGæ–‡ä»¶
- JSONæ ¼å¼å­˜å‚¨å…ƒæ•°æ®
- å¯é€šè¿‡APIå•ç‹¬è®¿é—®
- æ”¯æŒé€æ˜åº¦

### ğŸ–¼ï¸ ç”»å¸ƒé›†æˆ
- è‡ªåŠ¨æ·»åŠ åˆ°Excalidrawç”»å¸ƒ
- æ¯ä¸ªå›¾å±‚ç‹¬ç«‹å¯æ“ä½œ
- æ”¯æŒæ‹–åŠ¨ã€ç¼©æ”¾ã€æ—‹è½¬
- ä¿æŒå›¾å±‚é¡ºåº

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¦‚æœçœ‹ä¸åˆ°æ–°UI

1. **ç¡®è®¤å‰ç«¯å·²é‡å¯**
   ```bash
   ./check_services.sh
   ```

2. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
   - æŒ‰ `Ctrl+Shift+R` (Windows/Linux)
   - æŒ‰ `Cmd+Shift+R` (Mac)

3. **æ£€æŸ¥ç¼–è¯‘é”™è¯¯**
   ```bash
   cd /home/ubuntu/jaaz/react
   npm run build
   ```

4. **æŸ¥çœ‹å‰ç«¯æ—¥å¿—**
   ```bash
   tail -f /tmp/jaaz_frontend.log
   ```

### å¦‚æœç¼©æ”¾å¤±è´¥

1. **æ£€æŸ¥Gemini APIå¯†é’¥**
   - åœ¨UIä¸­è¾“å…¥
   - æˆ–åœ¨ `server/config.env` ä¸­é…ç½®

2. **æ£€æŸ¥åç«¯æ—¥å¿—**
   ```bash
   tail -f /home/ubuntu/jaaz/server/backend.log
   ```

3. **ç¡®è®¤PSDæ–‡ä»¶æœ‰æ•ˆ**
   - è‡³å°‘åŒ…å«1ä¸ªå¯è§å›¾å±‚
   - æ–‡ä»¶æ ¼å¼æ­£ç¡®

---

## ğŸ“š APIæ–‡æ¡£

### PSDåˆ†å±‚ç¼©æ”¾
```http
POST /api/psd/resize/resize-by-id-layered
Content-Type: multipart/form-data

file_id: string
target_width: number
target_height: number
api_key: string (optional)
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "file_id": "psd_layered_xxxxx",
  "layers_count": 5,
  "layers": [
    {
      "index": 0,
      "name": "Layer Name",
      "left": 100,
      "top": 50,
      "width": 200,
      "height": 150,
      "image_url": "/api/psd/resize/layered/psd_layered_xxxxx/layer_000"
    }
  ]
}
```

### è·å–å›¾å±‚å›¾åƒ
```http
GET /api/psd/resize/layered/{file_id}/layer_{index}
```

**å“åº”ï¼š** PNGå›¾åƒæ–‡ä»¶

---

## ğŸ¯ ç°åœ¨å°±è¯•è¯•å§ï¼

1. æ‰§è¡Œ `./restart_frontend.sh`
2. è®¿é—® http://localhost:3004/canvas/default
3. ä¸Šä¼ PSDï¼Œå¼€å¯åˆ†å±‚æ¨¡å¼
4. ä½“éªŒæ¯ä¸ªå›¾å±‚ç‹¬ç«‹ç§»åŠ¨çš„é­”åŠ›ï¼

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

