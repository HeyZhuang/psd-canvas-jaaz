# PSD ç›´æŽ¥ç•«å¸ƒé¡¯ç¤ºåŠŸèƒ½èªªæ˜Ž

## ðŸŽ¯ åŠŸèƒ½æ¦‚è¿°

æ ¹æ“šç”¨æˆ¶éœ€æ±‚ï¼ŒPSD ä¸Šå‚³åŠŸèƒ½ç¾åœ¨å·²ç¶“å„ªåŒ–ç‚º**ç›´æŽ¥é¡¯ç¤ºæ¨¡å¼**ï¼š

- âœ… **ç„¡å½ˆçª—**ï¼šä¸Šå‚³ PSD å¾Œä¸æœƒå½ˆå‡ºåœ–å±¤ç·¨è¼¯å™¨å°è©±æ¡†
- âœ… **ç›´æŽ¥é¡¯ç¤º**ï¼šæ‰€æœ‰åœ–å±¤è‡ªå‹•æ·»åŠ åˆ°è‡ªç”±ç•«å¸ƒä¸­
- âœ… **æ™ºèƒ½ä½ˆå±€**ï¼šåœ–å±¤æŒ‰ç¶²æ ¼æŽ’åˆ—ï¼Œé¿å…é‡ç–Š
- âœ… **å³æ™‚åé¥‹**ï¼šä¸Šå‚³æˆåŠŸå¾Œç«‹å³çœ‹åˆ°çµæžœ

## âœ¨ å·¥ä½œæµç¨‹

### æ–°çš„ç°¡åŒ–æµç¨‹
1. **é»žæ“Šä¸Šå‚³æŒ‰éˆ•** â†’ é¸æ“‡ PSD æ–‡ä»¶
2. **è‡ªå‹•è§£æž** â†’ å¾Œç«¯è§£æž PSD åœ–å±¤
3. **ç›´æŽ¥é¡¯ç¤º** â†’ æ‰€æœ‰åœ–å±¤è‡ªå‹•æ·»åŠ åˆ°ç•«å¸ƒ
4. **æ™ºèƒ½æŽ’åˆ—** â†’ åœ–å±¤æŒ‰ç¶²æ ¼ä½ˆå±€æŽ’åˆ—

### ç§»é™¤çš„æ­¥é©Ÿ
- âŒ ~~å½ˆå‡ºåœ–å±¤ç·¨è¼¯å™¨å°è©±æ¡†~~
- âŒ ~~æ‰‹å‹•é¸æ“‡åœ–å±¤~~
- âŒ ~~æ‰‹å‹•æ·»åŠ åˆ°ç•«å¸ƒ~~

## ðŸ”§ æŠ€è¡“å¯¦ç¾

### æ ¸å¿ƒä¿®æ”¹
```typescript
// ä¿®æ”¹å‰ï¼šä¸Šå‚³å¾Œæ‰“é–‹ç·¨è¼¯å™¨
setIsEditorOpen(true)
await handleAutoAddLayers(result)

// ä¿®æ”¹å¾Œï¼šç›´æŽ¥æ·»åŠ åˆ°ç•«å¸ƒ
await handleAutoAddLayers(result)
```

### å‡½æ•¸å„ªåŒ–
```typescript
const addLayerToCanvas = useCallback(
    async (layer: any, psdFileId: string, offsetX: number = 0, offsetY: number = 0) => {
        // ç›´æŽ¥æ·»åŠ åœ–å±¤åˆ°ç•«å¸ƒï¼Œç„¡éœ€å½ˆçª—
        const imageElement = {
            type: 'image',
            id: `psd_layer_${layer.index}_${Date.now()}`,
            x: layer.left + offsetX,
            y: layer.top + offsetY,
            // ... å…¶ä»–å±¬æ€§
        }
        
        excalidrawAPI.updateScene({
            elements: [...currentElements, imageElement],
        })
    },
    [excalidrawAPI]
)
```

### ä½ˆå±€ç®—æ³•
```typescript
// æ™ºèƒ½ç¶²æ ¼ä½ˆå±€
const cols = Math.ceil(Math.sqrt(imageLayers.length))
const cellWidth = 300
const cellHeight = 200
const spacing = 50

for (let i = 0; i < imageLayers.length; i++) {
    const row = Math.floor(i / cols)
    const col = i % cols
    const offsetX = col * (cellWidth + spacing)
    const offsetY = row * (cellHeight + spacing)
    
    await addLayerToCanvas(layer, psdData.file_id, offsetX, offsetY)
}
```

## ðŸš€ ç”¨æˆ¶é«”é©—æ”¹é€²

### 1. æ“ä½œç°¡åŒ–
- **ä¸€éµä¸Šå‚³**ï¼šé»žæ“Šä¸Šå‚³æŒ‰éˆ•å³å¯å®Œæˆæ‰€æœ‰æ“ä½œ
- **ç„¡éœ€é¸æ“‡**ï¼šç³»çµ±è‡ªå‹•è™•ç†æ‰€æœ‰å¯è¦‹åœ–å±¤
- **å³æ™‚é¡¯ç¤º**ï¼šä¸Šå‚³å®Œæˆå¾Œç«‹å³çœ‹åˆ°çµæžœ

### 2. è¦–è¦ºåé¥‹
- **ä¸Šå‚³é€²åº¦**ï¼šé¡¯ç¤ºä¸Šå‚³ç‹€æ…‹
- **æˆåŠŸé€šçŸ¥**ï¼šé¡¯ç¤ºæ·»åŠ çš„åœ–å±¤æ•¸é‡
- **éŒ¯èª¤è™•ç†**ï¼šå‹å¥½çš„éŒ¯èª¤æç¤º

### 3. ä½ˆå±€å„ªåŒ–
- **ç¶²æ ¼æŽ’åˆ—**ï¼šåœ–å±¤æŒ‰ç¶²æ ¼æ•´é½ŠæŽ’åˆ—
- **é¿å…é‡ç–Š**ï¼šåˆç†çš„é–“è·è¨­è¨ˆ
- **éŸ¿æ‡‰å¼**ï¼šé©æ‡‰ä¸åŒæ•¸é‡çš„åœ–å±¤

## ðŸ“± ç•Œé¢è®ŠåŒ–

### ç§»é™¤çš„çµ„ä»¶
- âŒ `PSDLayerEditor` çµ„ä»¶æ¸²æŸ“
- âŒ `isEditorOpen` ç‹€æ…‹ç®¡ç†
- âŒ `psdData` ç‹€æ…‹å­˜å„²
- âŒ `handlePSDUpdate` å›žèª¿å‡½æ•¸

### ä¿ç•™çš„åŠŸèƒ½
- âœ… ä¸Šå‚³æŒ‰éˆ•
- âœ… æ–‡ä»¶é¸æ“‡
- âœ… è‡ªå‹•ä½ˆå±€
- âœ… éŒ¯èª¤è™•ç†

## ðŸŽ¨ ä½ˆå±€åƒæ•¸

### ç¶²æ ¼è¨­ç½®
- **å–®å…ƒæ ¼å¯¬åº¦**ï¼š300px
- **å–®å…ƒæ ¼é«˜åº¦**ï¼š200px
- **é–“è·**ï¼š50px
- **æœ€å¤§åˆ—æ•¸**ï¼šæ ¹æ“šåœ–å±¤æ•¸é‡å‹•æ…‹è¨ˆç®—

### æŽ’åˆ—è¦å‰‡
- **è¡Œå„ªå…ˆ**ï¼šå¾žå·¦åˆ°å³ï¼Œå¾žä¸Šåˆ°ä¸‹
- **è‡ªå‹•æ›è¡Œ**ï¼šé”åˆ°æœ€å¤§åˆ—æ•¸æ™‚è‡ªå‹•æ›è¡Œ
- **å±…ä¸­å°é½Š**ï¼šåœ–å±¤åœ¨å–®å…ƒæ ¼ä¸­å±…ä¸­é¡¯ç¤º

## ðŸ” ä½¿ç”¨å ´æ™¯

### 1. å¿«é€Ÿé è¦½
- **è¨­è¨ˆå¸«**ï¼šå¿«é€ŸæŸ¥çœ‹ PSD æ–‡ä»¶çš„æ‰€æœ‰åœ–å±¤
- **å®¢æˆ¶**ï¼šç›´è§€äº†è§£è¨­è¨ˆçµ„æˆ
- **é–‹ç™¼è€…**ï¼šå¿«é€Ÿç†è§£è¨­è¨ˆçµæ§‹

### 2. æ‰¹é‡è™•ç†
- **å¤šåœ–å±¤æ–‡ä»¶**ï¼šä¸€æ¬¡æ€§è™•ç†å¤§é‡åœ–å±¤
- **è¤‡é›œè¨­è¨ˆ**ï¼šå¿«é€Ÿåˆ†è§£è¤‡é›œè¨­è¨ˆ
- **ç‰ˆæœ¬å°æ¯”**ï¼šä¸¦æŽ’æ¯”è¼ƒä¸åŒç‰ˆæœ¬

### 3. å”ä½œå ´æ™¯
- **åœ˜éšŠè¨Žè«–**ï¼šæ‰€æœ‰åœ–å±¤åŒæ™‚å¯è¦‹
- **è¨­è¨ˆå¯©æŸ¥**ï¼šå¿«é€Ÿè­˜åˆ¥å•é¡Œ
- **å®¢æˆ¶å±•ç¤º**ï¼šç›´è§€å±•ç¤ºè¨­è¨ˆç´°ç¯€

## ðŸ“Š æ€§èƒ½å„ªåŒ–

### 1. æ‰¹é‡è™•ç†
- **ä¸¦è¡Œä¸Šå‚³**ï¼šå¤šå€‹åœ–å±¤åŒæ™‚è™•ç†
- **å»¶é²æŽ§åˆ¶**ï¼šé¿å…éŽå¿«è«‹æ±‚
- **å…§å­˜ç®¡ç†**ï¼šåŠæ™‚é‡‹æ”¾è³‡æº

### 2. æ¸²æŸ“å„ªåŒ–
- **å¢žé‡æ›´æ–°**ï¼šé€å€‹æ·»åŠ åœ–å±¤
- **è¦–è¦ºåé¥‹**ï¼šé¡¯ç¤ºè™•ç†é€²åº¦
- **éŒ¯èª¤æ¢å¾©**ï¼šå–®å€‹å¤±æ•—ä¸å½±éŸ¿æ•´é«”

### 3. ç”¨æˆ¶é«”é©—
- **å³æ™‚åé¥‹**ï¼šä¸Šå‚³å®Œæˆç«‹å³é¡¯ç¤º
- **é€²åº¦æç¤º**ï¼šé¡¯ç¤ºè™•ç†ç‹€æ…‹
- **ä¸­æ–·æ”¯æŒ**ï¼šæ”¯æŒå–æ¶ˆæ“ä½œ

## ðŸŽ‰ ç¸½çµ

é€šéŽé€™æ¬¡å„ªåŒ–ï¼ŒPSD ä¸Šå‚³åŠŸèƒ½è®Šå¾—æ›´åŠ ï¼š

âœ… **ç°¡æ½”** - ä¸€éµä¸Šå‚³ï¼Œç„¡éœ€é¡å¤–æ“ä½œ
âœ… **å¿«é€Ÿ** - ç›´æŽ¥é¡¯ç¤ºï¼Œç„¡éœ€ç­‰å¾…
âœ… **ç›´è§€** - æ‰€æœ‰åœ–å±¤åŒæ™‚å¯è¦‹
âœ… **æ™ºèƒ½** - è‡ªå‹•ä½ˆå±€ï¼Œç„¡éœ€æ‰‹å‹•èª¿æ•´
âœ… **é«˜æ•ˆ** - æ‰¹é‡è™•ç†ï¼Œç¯€çœæ™‚é–“

ç¾åœ¨ç”¨æˆ¶åªéœ€è¦ï¼š
1. é»žæ“Šä¸Šå‚³æŒ‰éˆ•
2. é¸æ“‡ PSD æ–‡ä»¶
3. ç­‰å¾…è‡ªå‹•è™•ç†å®Œæˆ

æ‰€æœ‰åœ–å±¤å°±æœƒè‡ªå‹•å‡ºç¾åœ¨è‡ªç”±ç•«å¸ƒä¸­ï¼Œå®Œå…¨ç¬¦åˆç”¨æˆ¶çš„éœ€æ±‚ï¼

